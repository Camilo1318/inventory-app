(this["webpackJsonpfirebase-crud-react"]=this["webpackJsonpfirebase-crud-react"]||[]).push([[0],{41:function(e,t,c){"use strict";c.r(t);var r=c(2),a=c.n(r),n=c(19),s=c.n(n),o=c(22),i=c(5),d=c.n(i),l=c(6),u=c(9),j=c(11),b=c(15),p=c(25),m=(c(42),c(43),p.a.initializeApp({apiKey:"AIzaSyDgm1r5PSGsSCbESckuvq8Yfr5wWOIOVNQ",authDomain:"fb-crud-react-d717c.firebaseapp.com",projectId:"fb-crud-react-d717c",storageBucket:"fb-crud-react-d717c.appspot.com",messagingSenderId:"3407964452",appId:"1:3407964452:web:ef66cef12ed247e9afebb1"})),O=m.firestore(),g=(m.storage(),c(30)),x=c(26),h=c(20),f=c(23),v=c(27),N=c(3),y=function(e){var t=e.addOrEditProduct,c=e.currentId,a=e.categories,n=e.setCategories,s=Object(g.a)(),o=s.register,i=s.errors,b=s.handleSubmit,p=s.setValue,m=Object(r.useState)(!1),y=Object(j.a)(m,2),k=y[0],w=y[1],C=Object(r.useState)(""),S=Object(j.a)(C,2),I=S[0],E=S[1],P=function(){var e=Object(u.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.collection("products").doc(t).get();case 2:c=e.sent,p("name",c.data().name),p("cantidad",c.data().cantidad),p("description",c.data().description),p("category",c.data().category);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){""!=c&&P(c)}),[c]),Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("form",{className:"card card-body",onSubmit:b((function(e,c){t(e),c.target.reset()})),children:[Object(N.jsx)("h4",{className:"text-center py-2",children:"Agregar Producto"}),Object(N.jsxs)("div",{className:"form-group input-group",children:[Object(N.jsx)("div",{className:"input-group-text bg-dark",children:Object(N.jsx)(x.a,{className:""})}),Object(N.jsx)("input",{type:"text",className:"form-control",placeholder:"Nombre del producto",name:"name",ref:o({required:{value:!0,message:"Campo Obligatorio"}})})]}),i.name&&Object(N.jsx)("span",{className:"badge badge-warning mb-4",children:i.name.message}),Object(N.jsxs)("div",{className:"form-group input-group",children:[Object(N.jsx)("div",{className:"input-group-text bg-dark",children:Object(N.jsx)(h.a,{className:"",children:"view_module"})}),Object(N.jsx)("input",{type:"number",className:"form-control",placeholder:"Cantidad",name:"cantidad",ref:o({required:{value:!0,message:"Campo Obligatorio"}})})]}),i.cantidad&&Object(N.jsx)("span",{className:"badge badge-warning mb-4",children:i.cantidad.message}),Object(N.jsxs)("div",{className:"form-group input-group",children:[Object(N.jsx)("div",{className:"input-group-text bg-dark",children:Object(N.jsx)(f.a,{className:"text-primary",children:"list"})}),Object(N.jsx)("select",{name:"category",className:"form-select form-control",ref:o,children:a.map((function(e){return Object(N.jsx)("option",{value:e,defaultValue:"selected",children:e},e)}))}),Object(N.jsx)("div",{className:"input-group-text btn btn-outline-primary",children:Object(N.jsx)(h.b,{onClick:function(){return w(!k)},className:""})})]}),k&&Object(N.jsxs)("div",{className:"form-group input-group",children:[Object(N.jsx)("div",{className:"input-group-text bg-dark",children:Object(N.jsx)(f.a,{children:"list"})}),Object(N.jsx)("input",{type:"text",className:"form-control",placeholder:"Nombre de la Nueva Categoria",name:"new_category",onChange:function(e){E(e.target.value)}}),Object(N.jsx)("div",{className:"input-group-text btn btn-outline-primary",children:Object(N.jsx)(v.a,{onClick:function(e){I.trim().length>2&&(n([I].concat(Object(l.a)(a))),w(!1),E(""))}})})]}),Object(N.jsx)("div",{className:"form-group input-group",children:Object(N.jsx)("textarea",{name:"description",cols:"3",className:"form-control",placeholder:"Ingrese una descripcion",ref:o})}),Object(N.jsx)("button",{className:"btn btn-outline-info btn-block",children:""===c?"Save":"Update"})]})})},k=c(29),w=c(28),C=function(e){var t=e.products,c=e.setCurrentId,r=e.onDeleteLink;return Object(N.jsx)(N.Fragment,{children:t.map((function(e){return Object(N.jsx)("div",{className:"col mb-4",children:Object(N.jsx)("div",{className:"card border-primary",children:Object(N.jsxs)("div",{className:"card-body",children:[Object(N.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(N.jsx)("div",{className:"text-wrap",children:Object(N.jsx)("h4",{className:"",children:e.name})}),Object(N.jsxs)("div",{className:"text-nowrap ",children:[Object(N.jsx)(w.a,{className:"m-2",role:"button",style:{fontSize:"15px"},onClick:function(){return c(e.id)},children:"create"}),Object(N.jsx)(k.a,{className:"text-danger",role:"button",style:{fontSize:"20px"},onClick:function(){return r(e.id)},children:"close"})]})]}),Object(N.jsxs)("h6",{className:"card-title",children:["Cantidad: ",e.cantidad]}),Object(N.jsx)("img",{className:"rounded mx-auto d-block py-2",src:"https://via.placeholder.com/150",alt:""}),Object(N.jsx)("h6",{className:"card-subtitle mt-2 text-center",children:e.description})]})})},e.id)}))})},S=c(17);var I=function(e){var t=e.categories,c=e.products,r=e.onDeleteLink,a=e.setCurrentId;return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(S.a,{allowMultipleExpanded:!1,children:t.map((function(e){return Object(N.jsxs)(S.b,{children:[Object(N.jsx)(S.d,{children:Object(N.jsx)(S.c,{children:e})}),Object(N.jsx)(S.e,{children:Object(N.jsx)("div",{className:"row row-cols-1 row-cols-md-3 g-2",children:Object(N.jsx)(C,{products:c,onDeleteLink:r,setCurrentId:a})})})]},e)}))})})},E=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),c=t[0],a=t[1],n=Object(r.useState)([]),s=Object(j.a)(n,2),i=s[0],p=s[1],m=Object(r.useState)([]),g=Object(j.a)(m,2),x=g[0],h=g[1],f=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==c){e.next=9;break}return console.log(O.collection()),e.next=4,O.collection(t.category).doc().set(t);case 4:console.log(t.category),h([].concat(Object(l.a)(x),[t.category])),b.c.success("Enlace Agregado!",{position:"top-right",autoClose:1200,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:b.b}),e.next=13;break;case 9:return e.next=11,O.collection(t.category).doc(c).update(t);case 11:b.c.info("Enlace Actualizado!",{position:"top-right",autoClose:1200,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:b.b}),a("");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.collection("products").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}))})),p(t)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){v()}),[]);var k=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Estas seguro de quere eliminar este enlace?")){e.next=4;break}return e.next=3,O.collection("products").doc(t).delete();case 3:b.c.error("Enlace eliminado!",{position:"top-right",autoClose:1200,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("div",{className:"row",children:[Object(N.jsx)("div",{className:"col-12 col-md-4",children:Object(N.jsx)(y,{addOrEditProduct:f,currentId:c,products:i,categories:x,setCategories:h})}),Object(N.jsx)("div",{className:"col mt-3",children:Object(N.jsx)(I,{products:i,onDeleteLink:k,setCurrentId:a,categories:x})})]})})};c(38);var P=function(){return Object(N.jsxs)("div",{className:"container py-4",children:[Object(N.jsx)(E,{}),Object(N.jsx)(b.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,limit:3}),Object(N.jsx)(b.a,{})]})};c(39),c(40);s.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(P,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.51b39b81.chunk.js.map