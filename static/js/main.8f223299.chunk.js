(this["webpackJsonpfirebase-crud-react"]=this["webpackJsonpfirebase-crud-react"]||[]).push([[0],{40:function(e,t,a){"use strict";a.r(t);var r=a(2),c=a.n(r),n=a(19),s=a.n(n),i=a(13),o=a(4),d=a.n(o),l=a(7),u=a(9),j=a(15),b=a(24),p=(a(41),a(42),b.a.initializeApp({apiKey:"AIzaSyDgm1r5PSGsSCbESckuvq8Yfr5wWOIOVNQ",authDomain:"fb-crud-react-d717c.firebaseapp.com",projectId:"fb-crud-react-d717c",storageBucket:"fb-crud-react-d717c.appspot.com",messagingSenderId:"3407964452",appId:"1:3407964452:web:ef66cef12ed247e9afebb1"})),m=p.firestore(),O=(p.storage(),a(29)),f=a(25),g=a(20),x=a(22),h=a(26),v=a(3),N=function(e){var t=e.addOrEditProduct,a=e.currentId,c=e.categories,n=e.setCategories,s=Object(O.a)(),o=s.register,j=s.errors,b=s.handleSubmit,p=s.setValue,N=Object(r.useState)(!1),w=Object(u.a)(N,2),k=w[0],y=w[1],C=Object(r.useState)(""),S=Object(u.a)(C,2),I=S[0],P=S[1],E=function(){var e=Object(l.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.collection("Categories"),a={name:I},!(I.trim().length>3)){e.next=6;break}return e.next=5,t.add(a);case 5:y(!1);case 6:P("");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.collection("Categories").onSnapshot((function(e){n(e.docs.map((function(e){return Object(i.a)(Object(i.a)({},e.data()),{},{id:e.id})})))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.collection("products").doc(t).get();case 2:a=e.sent,p("name",a.data().name),p("cantidad",a.data().cantidad),p("description",a.data().description);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){""!=a&&D(a),B()}),[a]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{className:"card card-body",onSubmit:b((function(e,a){t(e),a.target.reset()})),children:[Object(v.jsx)("h4",{className:"text-center py-2",children:"Agregar Producto"}),Object(v.jsxs)("div",{className:"form-group input-group",children:[Object(v.jsx)("div",{className:"input-group-text bg-dark",children:Object(v.jsx)(f.a,{className:""})}),Object(v.jsx)("input",{type:"text",className:"form-control",placeholder:"Nombre del producto",name:"name",ref:o({required:{value:!0,message:"Campo Obligatorio"}})})]}),j.name&&Object(v.jsx)("span",{className:"badge badge-warning mb-4",children:j.name.message}),Object(v.jsxs)("div",{className:"form-group input-group",children:[Object(v.jsx)("div",{className:"input-group-text bg-dark",children:Object(v.jsx)(g.a,{className:"",children:"view_module"})}),Object(v.jsx)("input",{type:"number",className:"form-control",placeholder:"Cantidad",name:"cantidad",ref:o({required:{value:!0,message:"Campo Obligatorio"}})})]}),j.cantidad&&Object(v.jsx)("span",{className:"badge badge-warning mb-4",children:j.cantidad.message}),Object(v.jsxs)("div",{className:"form-group input-group",children:[Object(v.jsx)("div",{className:"input-group-text bg-dark",children:Object(v.jsx)(x.a,{className:"text-primary",children:"list"})}),Object(v.jsx)("select",{name:"category",className:"form-select form-control",ref:o,children:c.map((function(e){var t=e.name,a=e.id;return Object(v.jsx)("option",{value:t,defaultValue:"selected",children:t},a)}))}),Object(v.jsx)("div",{className:"input-group-text btn btn-outline-primary",children:Object(v.jsx)(g.b,{onClick:function(){return y(!k)},className:""})})]}),k&&Object(v.jsxs)("div",{className:"form-group input-group",children:[Object(v.jsx)("div",{className:"input-group-text bg-dark",children:Object(v.jsx)(x.a,{children:"list"})}),Object(v.jsx)("input",{type:"text",className:"form-control",placeholder:"Nombre de la Nueva Categoria",name:"new_category",onChange:function(e){P(e.target.value)},ref:o({required:{value:!0,message:"Campo Obligatorio"}})}),Object(v.jsx)("div",{className:"input-group-text btn btn-outline-primary",children:Object(v.jsx)(h.a,{onClick:E})})]}),j.new_category&&Object(v.jsx)("span",{className:"badge badge-warning mb-4",children:j.new_category.message}),Object(v.jsx)("div",{className:"form-group input-group",children:Object(v.jsx)("textarea",{name:"description",cols:"3",className:"form-control",placeholder:"Ingrese una descripcion",ref:o})}),Object(v.jsx)("button",{className:"btn btn-outline-info btn-block",children:""===a?"Save":"Update"})]})})},w=a(28),k=a(27),y=function(e){e.products;var t=e.setCurrentId,a=e.onDeleteLink,c=e.name,n=Object(r.useState)([]),s=Object(u.a)(n,2),o=s[0],j=s[1],b=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.collection("Products").where("category","==",c).onSnapshot((function(e){j(e.docs.map((function(e){return Object(i.a)(Object(i.a)({},e.data()),{},{id:e.id})})))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){b()})),Object(v.jsx)(v.Fragment,{children:o.map((function(e){return Object(v.jsx)("div",{className:"col mb-4",children:Object(v.jsx)("div",{className:"card border-primary",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(v.jsx)("div",{className:"text-wrap",children:Object(v.jsx)("h4",{className:"",children:e.name})}),Object(v.jsxs)("div",{className:"text-nowrap ",children:[Object(v.jsx)(k.a,{className:"m-2",role:"button",style:{fontSize:"15px"},onClick:function(){return t(e.id)},children:"create"}),Object(v.jsx)(w.a,{className:"text-danger",role:"button",style:{fontSize:"20px"},onClick:function(){return a(e.id)},children:"close"})]})]}),Object(v.jsxs)("h6",{className:"card-title",children:["Cantidad: ",e.cantidad]}),Object(v.jsx)("img",{className:"rounded mx-auto d-block py-2",src:"https://via.placeholder.com/150",alt:""}),Object(v.jsx)("h6",{className:"card-subtitle mt-2 text-center",children:e.description})]})})},e.id)}))})},C=a(17);var S=function(e){var t=e.categories,a=e.products,r=e.onDeleteLink,c=e.setCurrentId;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(C.a,{allowMultipleExpanded:!1,children:t.map((function(e){var t=e.name,n=e.id;return Object(v.jsxs)(C.b,{children:[Object(v.jsx)(C.d,{children:Object(v.jsx)(C.c,{children:t})}),Object(v.jsx)(C.e,{children:Object(v.jsx)("div",{className:"row row-cols-1 row-cols-md-3 g-2",children:Object(v.jsx)(y,{products:a,onDeleteLink:r,setCurrentId:c,name:t})})})]},n)}))})})},I=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],n=Object(r.useState)([]),s=Object(u.a)(n,2),o=s[0],b=s[1],p=Object(r.useState)([]),O=Object(u.a)(p,2),f=O[0],g=O[1],x=function(){var e=Object(l.a)(d.a.mark((function e(t){var r,n,s,i,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.cantidad,n=t.description,s=t.name,i=t.category,""!==a){e.next=8;break}l=m.collection("Products"),u={cantidad:r,description:n,name:s,category:i},l.add(u),j.c.success("Enlace Agregado!",{position:"top-right",autoClose:1200,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:j.b}),e.next=12;break;case 8:return e.next=10,m.collection("Products").doc(a).update(o);case 10:j.c.info("Enlace Actualizado!",{position:"top-right",autoClose:1200,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:j.b}),c("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.collection("Products").onSnapshot((function(e){b(e.docs.map((function(e){return Object(i.a)(Object(i.a)({},e.data()),{},{id:e.id})})))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){h()}),[]);var w=function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Estas seguro de quere eliminar este enlace?")){e.next=4;break}return e.next=3,m.collection("Products").doc(t).delete();case 3:j.c.error("Enlace eliminado!",{position:"top-right",autoClose:1200,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-12 col-md-4",children:Object(v.jsx)(N,{addOrEditProduct:x,currentId:a,products:o,categories:f,setCategories:g})}),Object(v.jsx)("div",{className:"col mt-3",children:Object(v.jsx)(S,{products:o,onDeleteLink:w,setCurrentId:c,categories:f})})]})})};a(37);var P=function(){return Object(v.jsxs)("div",{className:"container py-4",children:[Object(v.jsx)(I,{}),Object(v.jsx)(j.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,limit:3}),Object(v.jsx)(j.a,{})]})};a(38),a(39);s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(P,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.8f223299.chunk.js.map