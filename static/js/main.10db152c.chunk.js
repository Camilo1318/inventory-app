(this["webpackJsonpfirebase-crud-react"]=this["webpackJsonpfirebase-crud-react"]||[]).push([[0],{40:function(e,t,a){"use strict";a.r(t);var c=a(2),r=a.n(c),n=a(19),s=a.n(n),o=a(16),i=a(4),d=a.n(i),l=a(7),u=a(9),j=a(14),b=a(24),p=(a(41),a(42),b.a.initializeApp({apiKey:"AIzaSyDgm1r5PSGsSCbESckuvq8Yfr5wWOIOVNQ",authDomain:"fb-crud-react-d717c.firebaseapp.com",projectId:"fb-crud-react-d717c",storageBucket:"fb-crud-react-d717c.appspot.com",messagingSenderId:"3407964452",appId:"1:3407964452:web:ef66cef12ed247e9afebb1"})),m=p.firestore(),O=(p.storage(),a(29)),f=a(25),x=a(20),g=a(22),h=a(26),v=a(3),N=function(e){var t=e.addOrEditProduct,a=e.currentId,r=e.categories,n=e.setCategories,s=e.setPathRefCategory,i=Object(O.a)(),j=i.register,b=i.errors,p=i.handleSubmit,N=i.setValue,k=Object(c.useState)(!1),w=Object(u.a)(k,2),y=w[0],C=w[1],S=Object(c.useState)(""),P=Object(u.a)(S,2),E=P[0],I=P[1],B=function(){var e=Object(l.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.collection("Categories"),a={name:E},!(E.trim().length>3)){e.next=5;break}return e.next=5,t.add(a).then((function(e){s(e.path),e.get().then((function(e){console.log(e)}))}));case 5:C(!1),I("");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.collection("Categories"),e.next=3,t.get().then((function(e){e.forEach((function(e){console.log(e.data().name),console.log(e.id),n([Object(o.a)(Object(o.a)({},r),{},{name:e.data().name,id:e.id})]),console.log(r)}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.collection("products").doc(t).get();case 2:a=e.sent,N("name",a.data().name),N("cantidad",a.data().cantidad),N("description",a.data().description);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){""!=a&&z(a),D()}),[a]),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{className:"card card-body",onSubmit:p((function(e,a){t(e),a.target.reset()})),children:[Object(v.jsx)("h4",{className:"text-center py-2",children:"Agregar Producto"}),Object(v.jsxs)("div",{className:"form-group input-group",children:[Object(v.jsx)("div",{className:"input-group-text bg-dark",children:Object(v.jsx)(f.a,{className:""})}),Object(v.jsx)("input",{type:"text",className:"form-control",placeholder:"Nombre del producto",name:"name",ref:j({required:{value:!0,message:"Campo Obligatorio"}})})]}),b.name&&Object(v.jsx)("span",{className:"badge badge-warning mb-4",children:b.name.message}),Object(v.jsxs)("div",{className:"form-group input-group",children:[Object(v.jsx)("div",{className:"input-group-text bg-dark",children:Object(v.jsx)(x.a,{className:"",children:"view_module"})}),Object(v.jsx)("input",{type:"number",className:"form-control",placeholder:"Cantidad",name:"cantidad",ref:j({required:{value:!0,message:"Campo Obligatorio"}})})]}),b.cantidad&&Object(v.jsx)("span",{className:"badge badge-warning mb-4",children:b.cantidad.message}),Object(v.jsxs)("div",{className:"form-group input-group",children:[Object(v.jsx)("div",{className:"input-group-text bg-dark",children:Object(v.jsx)(g.a,{className:"text-primary",children:"list"})}),Object(v.jsx)("select",{name:"category",className:"form-select form-control",ref:j,children:r.map((function(e){var t=e.name,a=e.id;return Object(v.jsx)("option",{value:t,defaultValue:"selected",children:t},a)}))}),Object(v.jsx)("div",{className:"input-group-text btn btn-outline-primary",children:Object(v.jsx)(x.b,{onClick:function(){return C(!y)},className:""})})]}),y&&Object(v.jsxs)("div",{className:"form-group input-group",children:[Object(v.jsx)("div",{className:"input-group-text bg-dark",children:Object(v.jsx)(g.a,{children:"list"})}),Object(v.jsx)("input",{type:"text",className:"form-control",placeholder:"Nombre de la Nueva Categoria",name:"new_category",onChange:function(e){I(e.target.value)}}),Object(v.jsx)("div",{className:"input-group-text btn btn-outline-primary",children:Object(v.jsx)(h.a,{onClick:B})})]}),Object(v.jsx)("div",{className:"form-group input-group",children:Object(v.jsx)("textarea",{name:"description",cols:"3",className:"form-control",placeholder:"Ingrese una descripcion",ref:j})}),Object(v.jsx)("button",{className:"btn btn-outline-info btn-block",children:""===a?"Save":"Update"})]})})},k=a(28),w=a(27),y=function(e){var t=e.products,a=e.setCurrentId,c=e.onDeleteLink;return Object(v.jsx)(v.Fragment,{children:t.map((function(e){return Object(v.jsx)("div",{className:"col mb-4",children:Object(v.jsx)("div",{className:"card border-primary",children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(v.jsx)("div",{className:"text-wrap",children:Object(v.jsx)("h4",{className:"",children:e.name})}),Object(v.jsxs)("div",{className:"text-nowrap ",children:[Object(v.jsx)(w.a,{className:"m-2",role:"button",style:{fontSize:"15px"},onClick:function(){return a(e.id)},children:"create"}),Object(v.jsx)(k.a,{className:"text-danger",role:"button",style:{fontSize:"20px"},onClick:function(){return c(e.id)},children:"close"})]})]}),Object(v.jsxs)("h6",{className:"card-title",children:["Cantidad: ",e.cantidad]}),Object(v.jsx)("img",{className:"rounded mx-auto d-block py-2",src:"https://via.placeholder.com/150",alt:""}),Object(v.jsx)("h6",{className:"card-subtitle mt-2 text-center",children:e.description})]})})},e.id)}))})},C=a(17);var S=function(e){var t=e.categories,a=e.products,c=e.onDeleteLink,r=e.setCurrentId;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(C.a,{allowMultipleExpanded:!1,children:t.map((function(e){var t=e.name,n=e.id;return Object(v.jsxs)(C.b,{children:[Object(v.jsx)(C.d,{children:Object(v.jsx)(C.c,{children:t})}),Object(v.jsx)(C.e,{children:Object(v.jsx)("div",{className:"row row-cols-1 row-cols-md-3 g-2",children:Object(v.jsx)(y,{products:a,onDeleteLink:c,setCurrentId:r})})})]},n)}))})})},P=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),a=t[0],r=t[1],n=Object(c.useState)([]),s=Object(u.a)(n,2),i=s[0],b=s[1],p=Object(c.useState)([]),O=Object(u.a)(p,2),f=O[0],x=O[1],g=Object(c.useState)(""),h=Object(u.a)(g,2),k=h[0],w=h[1],y=function(){var e=Object(l.a)(d.a.mark((function e(t){var c,n,s,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.cantidad,n=t.description,s=t.name,""!==a){e.next=8;break}o=m.collection("Products"),l={cantidad:c,description:n,name:s,category:k},o.add(l),j.c.success("Enlace Agregado!",{position:"top-right",autoClose:1200,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:j.b}),e.next=12;break;case 8:return e.next=10,m.collection("Products").doc(a).update(i);case 10:j.c.info("Enlace Actualizado!",{position:"top-right",autoClose:1200,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,transition:j.b}),r("");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.collection("Products").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}))})),b(t)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){C()}),[]);var P=function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Estas seguro de quere eliminar este enlace?")){e.next=4;break}return e.next=3,m.collection("Products").doc(t).delete();case 3:j.c.error("Enlace eliminado!",{position:"top-right",autoClose:1200,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-12 col-md-4",children:Object(v.jsx)(N,{addOrEditProduct:y,currentId:a,products:i,categories:f,setCategories:x,setPathRefCategory:w})}),Object(v.jsx)("div",{className:"col mt-3",children:Object(v.jsx)(S,{products:i,onDeleteLink:P,setCurrentId:r,categories:f})})]})})};a(37);var E=function(){return Object(v.jsxs)("div",{className:"container py-4",children:[Object(v.jsx)(P,{}),Object(v.jsx)(j.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,limit:3}),Object(v.jsx)(j.a,{})]})};a(38),a(39);s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(E,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.10db152c.chunk.js.map